using System;
using System.Data.Common;
using System.Data.SQLite;
using Dapper;

namespace StartForm {
    public static class SqlHelper {
        public static bool CheckUser(string Username, string Password)
        {
            using DbConnection conn = new SQLiteConnection(connectionString);
            try {
                var user = conn.QuerySingle("select * from Users where Username=@Username and Password=@Password", new { Username, Password });
            }
            catch ( InvalidOperationException ) {
                return false;
            }
            return true;
        }
        public static bool SaveUser(string Username, string Password)
        {
            using DbConnection conn = new SQLiteConnection(connectionString);
            try {
                conn.Execute("insert into Users (Username, Password) values (@Username, @Password)", new { Username, Password });
            }
            catch ( SQLiteException ) {
                return false;
            }
            return true;
        }
        private const string connectionString = @"Data Source=.\users.db;Version=3;Cache=Shared;";
    }
}
